[![Build Affected](https://github.com/corentingosselin/campuscalendar/actions/workflows/nx-affected.yml/badge.svg?branch=main)](https://github.com/corentingosselin/campuscalendar/actions/workflows/nx-affected.yml)

# Campuscalendar
![Capture d’écran 2024-02-02 à 10 20 18](https://github.com/corentingosselin/campuscalendar/assets/8132994/b03cc9c9-3dad-4e37-8562-f23192c806e6)

![Capture d’écran 2024-02-02 à 10 19 38](https://github.com/corentingosselin/campuscalendar/assets/8132994/46c57362-5bfc-4905-ae82-7cacce04a114)

![Capture d’écran 2024-02-02 à 10 20 08](https://github.com/corentingosselin/campuscalendar/assets/8132994/921b4fc3-6a90-48eb-bca8-f9985fa767e9)
![Capture d’écran 2024-02-02 à 10 19 56](https://github.com/corentingosselin/campuscalendar/assets/8132994/c01574be-55b9-49b3-8b5c-237675706cae)



[![Build Affected](https://github.com/corentingosselin/campuscalendar/actions/workflows/nx-affected.yml/badge.svg?branch=develop)](https://github.com/corentingosselin/campuscalendar/actions/workflows/nx-affected.yml)

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨


## How to run the project

Run `npm run docker:prod` to start the docker containers. Navigate to http://localhost:8080 to see the app running.

## If you need to run the project locally and manually

Run `npm i -g pnpm` to install pnpm globally. Then run `pnpm i` to install all dependencies.
Run `npm run docker:prod` to start the entire application campuscalendar like in production
Run `nx serve <service-name>` to start the service you need to work on, be careful, some services depend on others.
Run `npm run docker:dev` to start the development environment, if you make a change the docker container is automatically updated 
However if you update the package.json please re-execute this command

## How to generate the migrations

If you made changes to the entities, change the package.json to target the right service:
```
  "mikro-orm": {
    "useTsNode": true,
    "tsConfigPath": "tsconfig.orm.json",
    "configPaths": [
      "./libs/event-service/core/src/mikro-orm.config.ts"
    ]
  },
```
 Then run `pnpm run migration:generate` to generate the new migration files.   

## How to run the migrations

Just starts the docker containers, you also need to recreate the flyway images

## Build the app

Run `npm run build:all` to build the app.


## How to run the tests

Run `nx run-many --target=test --all` to run all tests.
