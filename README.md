[![Build Affected](https://github.com/corentingosselin/campuscalendar/actions/workflows/nx-affected.yml/badge.svg?branch=main)](https://github.com/corentingosselin/campuscalendar/actions/workflows/nx-affected.yml)

# Campuscalendar

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨


## How to run the project

Run `npm run docker:prod` to start the docker containers. Navigate to http://localhost:8080 to see the app running.

## If you need to run the project locally and manually

Run `npm i -g pnpm` to install pnpm globally. Then run `pnpm i` to install all dependencies.
Run `pnpm run docker` to start the docker containers like databases and rabbitmq.
Run `nx serve <service-name>` to start the service you need to work on, be careful, some services depend on others.

## How to generate the migrations

If you made changes to the entities, change the package.json to target the right service:
```
  "mikro-orm": {
    "useTsNode": true,
    "tsConfigPath": "tsconfig.orm.json",
    "configPaths": [
      "./libs/event-service/core/src/mikro-orm.config.ts"
    ]
  },
```
 Then run `pnpm run migration:generate` to generate the new migration files.   

## How to run the migrations

Just starts the docker containers, you also need to recreate the flyway images

## Build the app

Run `npm run build:all` to build the app.


## How to run the tests

Run `nx run-many --target=test --all` to run all tests.
